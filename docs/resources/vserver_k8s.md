---

# generated by https://github.com/hashicorp/terraform-plugin-docs

subcategory: "vContainer"
page_title: "vngcloud_vserver_k8s Resource - terraform-provider-vngcloud"
description: |-
  Provides a VNG Cloud VServer Kubernetes resource. This can be used to import, create, modify, and delete.
  
---

# vngcloud_vserver_k8s (Resource)

## Example Usage

```terraform
resource "vngcloud_vserver_k8s" "k8s" {
  project_id            = "pro-xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"
  ipip_mode             = "Always"
  name                  = "example-cluster"
  k8s_version           = "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"
  master_count          = 1
  node_count            = 1
  network_type          = "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"
  calico_cidr           = "xx.xx.xx.xx/16"
  network_id            = "net-xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"
  subnet_id             = "sub-xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"
  ssh_key_id            = "ssh-xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"
  master_flavor_id      = "flav-xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"
  node_flavor_id        = "flav-xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"
  etcd_volume_size      = 20
  etcd_volume_type_id   = "vtype-xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"
  boot_volume_size      = 20
  boot_volume_type_id   = "vtype-xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"
  docker_volume_size    = 20
  docker_volume_type_id = "vtype-xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"
}

```

## Argument Reference

The following arguments are supported:

- **project_id** (String, Required) ID of the Project.
- **ipip_mode** (String, Required) IPIP Encapsulation Mode. It can be `Always`.
- **name** (String, Required) Name of Cluster.
- **description** (String, Optional) Description of Cluster.
- **k8s_version** (String, Required) Version of Cluster.
- **master_count** (Number, Required) Number of master node. It can be `1`, `3` or `5`.
- **node_count** (Number, Required) Number of minion node.
- **master_flavor_id** (String, Required) ID of the flavor of the Master Node.
- **node_flavor_id** (String, Required) ID of the flavor of the Minion Node.
- **etcd_volume_size** (Number, Required) Size of ETCD volume.
- **etcd_volume_type_id** (String, Required) ID of ETCD volume type.
- **boot_volume_size** (Number, Required) Size of boot volume.
- **boot_volume_type_id** (String, Required) ID of boot volume type.
- **docker_volume_size** (Number, Required) Size of docker volume.
- **docker_volume_type_id** (String, Required) ID of docker volume type.
- **network_type** (String, Required) ID of the network type. It can be gotten by Data Source vserver_k8s_network_type.
- **calico_cidr** (String, Required) Calico CIDR. It can not be overlapped with Vpc CIDR.
- **network_id** (String, Required) ID of the network.
- **subnet_id** (String, Required) ID of the subnet.
- **ssh_key_id** (String, Optional) ID of SSH key
- **enable_lb** (Boolean, Optional) Enable HA (allow to have 3 or 5 master nodes). Default value is `false`.
- **auto_scaling** (Boolean, Optional) Enable Auto Scaling. Default value is `false`.
- **auto_healing** (Boolean, Optional) Enable Auto Healing. Default value is `false`.
- **ingress_controller** (Boolean, Optional) Enable Ingress Controller. Default value is `false`.
- **auto_monitoring** (Boolean, Optional) Enable Auto Monitoring. Default value is `false`.
- **min_node_count** (Number, Optional) Minimum number of minion node. It is required when auto_scaling value is `true`.
- **max_node_count** (Number, Optional) Maximum number of minion node. It is required when auto_scaling value is `true`.

## Attributes Reference

In addition to all arguments above, the following attributes are exported:

- **id** (String) The ID of this Cluster.
- **node_group_default_id** (String) The ID of default Node Group.
- **config** (String) The config file of Cluster
- **secgroup_default_master** (List of Map of String) List of Sec Group Default for Master Node. It included:
    - **sec_group_name** (String)
    - **rules** (List of Map of String) List of rules. It included:
        - **direction** (String)
        - **ethertype** (String)
        - **port_range_max** (Number)
        - **port_range_min** (Number)
        - **protocol** (String)
        - **remote_group_name** (String)
        - **remote_ip_prefix** (String)
- **secgroup_default_minion** (List of Map of String) List of Sec Group Default for Minion Node. It included:
    - **sec_group_name** (String)
    - **rules** (List of Map of String) List of rules. It included:
        - **direction** (String)
        - **ethertype** (String)
        - **port_range_max** (Number)
        - **port_range_min** (Number)
        - **protocol** (String)
        - **remote_group_name** (String)
        - **remote_ip_prefix** (String)
- **end_point** (String) End Point of Cluster.
- **k8s_network_type** (String) Name of K8s Network Type
- **node_flavor_name** (String) Name of Minion Node Flavor.
- **master_flavor_name** (String) Name of Master Node Flavor.
- **ssh_key_name** (String) Name of SSH Key.

## IAM Policy

### Create:

In order to **create K8s**, user must have been granted permissions below:

- CreateCluster
- GetCluster (specify by **all resources**)
- ListClusterSecGroupDefault (specify by **all resources**)
- GetClusterConfig (specify by **all resources**)

### Delete

In order to **delete K8s**, user must have been granted permissions below:

- DeleteCluster (specify by **cluster Id**)

### Update

In order to **update K8s** (scaling Minion for Default Node Group), user must have been granted permissions below:

- ScaleMinionCluster
- ListClusterSecGroupDefault
- GetClusterConfig